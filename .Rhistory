scale_linetype(labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend", colour = variable) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
ylab("Spot Rate (%)")+
xlab("Tenor") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_linetype(labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
ylab("Spot Rate (%)")+
xlab("Tenor") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_linetype_manual(labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
ylab("Spot Rate (%)")+
xlab("Tenor") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_linetype_manual(values = cbbPalette, labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
ylab("Spot Rate (%)")+
xlab("Tenor") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_linetype(values = cbbPalette, labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
ylab("Spot Rate (%)")+
xlab("Tenor") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_linetype(labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
#scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
ylab("Spot Rate (%)")+
xlab("Tenor") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
#scale_linetype(labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
#scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
#scale_linetype(labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
#scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_fill_discrete(labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
#scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_fill_discrete(labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year")) +
#scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_fill_manual(labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year")) +
#scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_colour_manual(labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year")) +
#scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_colour_manual(values = cbbPalette, labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year")) +
#scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
labs( x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_colour_manual(values = cbbPalette, labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year")) +
#scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
#labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
scale_colour_manual(values = cbbPalette, labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
#scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
#scale_colour_manual(values = cbbPalette, labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
graph.data <- cbind(Time[-1], simulation [-1], Year.2[-1], Year.10[-1])
colnames(graph.data) <- c("Tenor", "Short Rate", "year-2", "year-10")
graph.data <- data.frame(graph.data)
graph.data <- melt(graph.data, id = c("Tenor"))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
#scale_colour_manual(values = cbbPalette, labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
graph.data <- cbind(Time[-1], simulation [-1], Year.2[-1], Year.10[-1])
colnames(graph.data) <- c("Tenor", "Short Rate", "Simulated 2-year", "Simulated year-10")
graph.data <- data.frame(graph.data)
graph.data <- melt(graph.data, id = c("Tenor"))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line() +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
#scale_colour_manual(values = cbbPalette, labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line(Size = 1) +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
#scale_colour_manual(values = cbbPalette, labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line(size = 1) +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
#scale_colour_manual(values = cbbPalette, labels = c("Simulated Short Rate", "Simulated 2-Year", "Simulated 10-Year"), name = "Legend") +
scale_colour_manual(values = cbbPalette) +
theme(legend.position = c(.85,.14), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
#plot 12.12 - To make this graph the OAS model should return the prepayment model SMM vector
set.seed(10000)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 107.5, short.rate = 0.0016, sigma = 0.015, paths = 10)
ggplot(plot, aes(x =Var1, y = (1-(1-value)^12) * 100, linetype = Var2)) +
geom_line() +
theme_minimal() +
ylab("CPR (%)")+
xlab("Pool Age (mos.)") +
scale_y_continuous(limits = c(0, 35), breaks = seq(0,35, 5))  +
scale_x_continuous(limits = c(0, 324), breaks = seq(0, 360, 24)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 107.5, short.rate = 0.0016, sigma = 0.015, paths = 10)
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line(size = 1) +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5), digits = 2)  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
#scale_linetype(labels = c("Yield Curve, t=10", "Yield Curve, t=120", "Yield Curve, t = 145", "Yield Curve, t = 253", "Yield Curve, t = 344"), name = "Legend") +
theme(legend.position = c(.8,.20), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
# Figure 12.9
set.seed(10000)
simulation <- round(CIRSim(shortrate = 0.0016, kappa = 0.109, theta = .0442, T = 30, step = 1/12, sigma = 0.015, N = 1),2)
# Plot interest rate paths
Time <-seq(0, 30, 1/12)
# Simulation
sim <- melt(simulation)
colnames(sim) <- c("Period", "Variable", "Value" )
ggplot(sim, aes(x = Period, y = Value * 100, colour = Variable, linetype = Variable)) +
geom_line(size = 1) +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_colour_manual(values = cbbPalette) +
scale_y_continuous(limits = c(0, 9), breaks = seq(0,9, 1))  +
scale_x_continuous(limits = c(0, 360), breaks = seq(0, 360, 36)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
set.seed(10000)
simulation <- CIRSim(shortrate = 0.0016, kappa = 0.109, theta = .0442, T = 30, step = 1/12, sigma = 0.015, N = 1)
# Plot interest rate paths
Time <-seq(0, 30, 1/12)
# Simulation
sim <- melt(simulation)
colnames(sim) <- c("Period", "Variable", "Value" )
ggplot(sim, aes(x = Period, y = Value * 100, colour = Variable, linetype = Variable)) +
geom_line(size = 1) +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_colour_manual(values = cbbPalette) +
scale_y_continuous(limits = c(0, 9), breaks = seq(0,9, 1))  +
scale_x_continuous(limits = c(0, 360), breaks = seq(0, 360, 36)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
View(simulation)
ggplot(sim, aes(x = Period, y = round(Value * 100,2), colour = Variable, linetype = Variable)) +
geom_line(size = 1) +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_colour_manual(values = cbbPalette) +
scale_y_continuous(limits = c(0, 9), breaks = seq(0,9, 1))  +
scale_x_continuous(limits = c(0, 360), breaks = seq(0, 360, 36)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(sim, aes(x = Period, y = digits(Value * 100,2), colour = Variable, linetype = Variable)) +
geom_line(size = 1) +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_colour_manual(values = cbbPalette) +
scale_y_continuous(limits = c(0, 9), breaks = seq(0,9, 1))  +
scale_x_continuous(limits = c(0, 360), breaks = seq(0, 360, 36)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(sim, aes(x = Period, y = format(Value * 100, digits = 2), colour = Variable, linetype = Variable)) +
geom_line(size = 1) +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_colour_manual(values = cbbPalette) +
scale_y_continuous(limits = c(0, 9), breaks = seq(0,9, 1))  +
scale_x_continuous(limits = c(0, 360), breaks = seq(0, 360, 36)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(sim, aes(x = Period, y = Value * 100, colour = Variable, linetype = Variable)) +
geom_line(size = 1) +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_colour_manual(values = cbbPalette) +
scale_y_continuous(limits = c(0, 9), breaks = seq(0,9, 1))  +
scale_x_continuous(limits = c(0, 360), breaks = seq(0, 360, 36)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(graph.data, aes(x = Tenor, y = value * 100, colour = variable, linetype = variable)) +
geom_line(size = 1) +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_y_continuous(limits = c(0, 7), breaks = seq(0,7, .5))  +
scale_x_continuous(limits = c(0, 30), breaks = seq(0, 30, 2)) +
#scale_linetype(labels = c("Yield Curve, t=10", "Yield Curve, t=120", "Yield Curve, t = 145", "Yield Curve, t = 253", "Yield Curve, t = 344"), name = "Legend") +
theme(legend.position = c(.8,.20), legend.background = element_rect(colour = 'white', fill = 'white')) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
ggplot(sim, aes(x = Period, y = Value * 100, colour = Variable, linetype = Variable)) +
geom_line(size = 1) +
theme_minimal() +
labs(colour = "Legend", linetype = "Legend", x = "Tenor (Mos.)", y = "Spot Rate (%)") +
scale_colour_manual(values = cbbPalette) +
scale_y_continuous(limits = c(0, 9), breaks = seq(0,9, .5))  +
scale_x_continuous(limits = c(0, 360), breaks = seq(0, 360, 36)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
library(BondLab)
#plot 12.12 - To make this graph the OAS model should return the prepayment model SMM vector
set.seed(10000)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
short.rate = 0.0016,
sigma = 0.015,
paths = 10)
ggplot(plot, aes(x =Var1, y = (1-(1-value)^12) * 100, linetype = Var2)) +
geom_line() +
theme_minimal() +
ylab("CPR (%)")+
xlab("Pool Age (mos.)") +
scale_y_continuous(limits = c(0, 35), breaks = seq(0,35, 5))  +
scale_x_continuous(limits = c(0, 324), breaks = seq(0, 360, 24)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
short.rate = 0.0016,
sigma = 0.015,
paths = 10)
set.seed(10000)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
#short.rate = 0.0016,
sigma = 0.015,
paths = 10)
library("lubridate", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
set.seed(10000)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
#short.rate = 0.0016,
sigma = 0.015,
paths = 10)
ggplot(plot, aes(x =Var1, y = (1-(1-value)^12) * 100, linetype = Var2)) +
geom_line() +
theme_minimal() +
ylab("CPR (%)")+
xlab("Pool Age (mos.)") +
scale_y_continuous(limits = c(0, 35), breaks = seq(0,35, 5))  +
scale_x_continuous(limits = c(0, 324), breaks = seq(0, 360, 24)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
library(BondLab)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
sigma = 0.015,
paths = 10)
library(BondLab)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
sigma = 0.015,
paths = 10)
library(BondLab)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
sigma = 0.015,
paths = 10)
library(BondLab)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
sigma = 0.015,
paths = 10)
library(BondLab)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
sigma = 0.015,
paths = 10)
View(prepayout)
library(BondLab)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
sigma = 0.015,
paths = 10)
library(BondLab)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
sigma = 0.015,
paths = 10)
View(prepayout)
library(BondLab)
plot <-  Mortgage.OAS(bond.id = "bondlabMBS55",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 107.5,
sigma = 0.015,
paths = 10)
sqrt(20) * 200
sqrt(.20) * 200
sqrt(.20 * 200)
sqrt(.1 * 200)
sqr(.015) * 200
sqt(.015) * 200
sqrt(.015) * 200
