trade.date = "01-10-2013",
settlement.date = "01-13-2013",
price = 105.75,
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30,
lower.PSA = 75,
upper.PSA = 250)
Pac <- data.frame(PAC.Sched[,-3])
Pac <- data.frame(cbind(seq(1:nrow(Pac)), Pac))
colnames(Pac) <- c("Month","75 PSA", "250 PSA")
Pac <- melt(Pac, id = "Month")
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "PPC",
begin.cpr = .2 * 1.25,
end.cpr = 6 * 1.25,
seasoning.period = 30)
set.seed(300)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 105.75,
short.rate = 0.0016,
sigma = 0.015,
paths = 200,
PrepaymentAssumption = "MODEL")
ggplot(Pac, aes(x = Month, y= value/1000, linetype = variable)) +
geom_line()+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
scale_fill_grey(name = "", labels = c("75 PSA", "250 PSA")) +
theme(legend.position="bottom", legend.background = element_rect(fill = "white", colour = "white")) +
theme(legend.key= element_rect(fill="white", colour= "white"))+
theme(legend.title=element_blank())
Pac <- data.frame(PAC.Sched[,-3])
Pac <- data.frame(cbind(seq(1:nrow(Pac)), Pac))
Pac <- data.frame(PAC.Sched[,-3])
PAC.Sched<-  MakeSchedule(bond.id = "BondLabMBS4",
DealName = "BondLabPAC01",
Group = 1,
original.bal = 200000000,
first.pmtdate = "01-25-2013",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
price = 105.75,
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30,
lower.PSA = 75,
upper.PSA = 250)
library(BondLab)
PAC.Sched<-  MakeSchedule(bond.id = "BondLabMBS4",
DealName = "BondLabPAC01",
Group = 1,
original.bal = 200000000,
first.pmtdate = "01-25-2013",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
price = 105.75,
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30,
lower.PSA = 75,
upper.PSA = 250)
library(BondLab)
library(BondLab)
PAC.Sched<-  MakeSchedule(bond.id = "BondLabMBS4",
DealName = "BondLabPAC01",
Group = 1,
original.bal = 200000000,
first.pmtdate = "01-25-2013",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
price = 105.75,
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30,
lower.PSA = 75,
upper.PSA = 250)
library(BondLab)
PAC.Sched<-  MakeSchedule(bond.id = "BondLabMBS4",
DealName = "BondLabPAC01",
Group = 1,
original.bal = 200000000,
first.pmtdate = "01-25-2013",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
price = 105.75,
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30,
lower.PSA = 75,
upper.PSA = 250)
library(BondLab)
PAC.Sched<-  MakeSchedule(bond.id = "BondLabMBS4",
DealName = "BondLabPAC01",
Group = 1,
original.bal = 200000000,
first.pmtdate = "01-25-2013",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
price = 105.75,
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30,
lower.PSA = 75,
upper.PSA = 250)
library(BondLab)
library(BondLab)
PAC.Sched<-  MakeSchedule(bond.id = "BondLabMBS4",
DealName = "BondLabPAC01",
Group = 1,
original.bal = 200000000,
first.pmtdate = "01-25-2013",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
price = 105.75,
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30,
lower.PSA = 75,
upper.PSA = 250)
Pac <- data.frame(PAC.Sched[,-3])
Pac <- data.frame(cbind(seq(1:nrow(Pac)), Pac))
colnames(Pac) <- c("Month","75 PSA", "250 PSA")
Pac <- melt(Pac, id = "Month")
Pac <- data.frame(PAC.Sched[,-3])
Pac <- data.frame(cbind(seq(1:nrow(Pac)), Pac))
View(Pac)
Pac <- data.frame(PAC.Sched[,-3])
PAC.Sched<-  MakeSchedule(bond.id = "BondLabMBS4",
DealName = "BondLabPAC01",
Group = 1,
original.bal = 200000000,
first.pmtdate = "01-25-2013",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
price = 105.75,
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30,
lower.PSA = 75,
upper.PSA = 250)
PAC.Sched<-  MakeSchedule(bond.id = "BondLabMBS4",
DealName = "BondLabPAC01",
Group = 1,
original.bal = 200000000,
first.pmtdate = "01-25-2013",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
price = 105.75,
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30,
lower.PSA = 75,
upper.PSA = 250)
PAC.Sched<-  MakeSchedule(bond.id = "BondLabMBS4",
DealName = "BondLabPAC01",
Group = 1,
original.bal = 200000000,
first.pmtdate = "01-25-2013",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
price = 105.75,
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30,
lower.PSA = 75,
upper.PSA = 250)
Sched.Conn <- gzfile(paste("~/BondLab/Schedules/",
"BondLabPAC01", "_Group_", "1"), "_Sch", ".rds",
sep = ""), open = "rb")
Sched.Conn <- gzfile(paste("~/BondLab/Schedules/",
"BondLabPAC01", "_Group_", "1"), "_Sch", ".rds",
sep = ""), open = "rb")
Sched.Conn <- gzfile(paste("~/BondLab/Schedules/",
"BondLabPAC01", "_Group_", "1", "_Sch", ".rds",
sep = ""), open = "rb")
PAC.Sched <- readRDS(Sched.Conn)
Pac <- data.frame(PAC.Sched[,-3])
Pac <- data.frame(cbind(seq(1:nrow(Pac)), Pac))
colnames(Pac) <- c("Month","75 PSA", "250 PSA")
Pac <- melt(Pac, id = "Month")
Pac <- data.frame(PAC.Sched[,-3])
UpperPSA  <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "PPC",
begin.cpr = .2 * 2.5,
end.cpr = 6 * 2.5,
seasoning.period = 30)
LowerPSA  <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "PPC",
begin.cpr = .2 * .75,
end.cpr = 6 * .75,
seasoning.period = 30)
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "PPC",
begin.cpr = .2 * 1.25,
end.cpr = 6 * 1.25,
seasoning.period = 30)
LoanAge <- seq(1, 360, 1)
Upper <- UpperPSA@ScheduledPrin + UpperPSA@PrepaidPrin
Lower <- LowerPSA@ScheduledPrin + LowerPSA@PrepaidPrin
Pac <- data.frame(cbind(LoanAge, Upper, Lower))
View(Pac)
View(Pac)
UpperPSA  <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 200000000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "PPC",
begin.cpr = .2 * 2.5,
end.cpr = 6 * 2.5,
seasoning.period = 30)
LowerPSA  <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 200000000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "PPC",
begin.cpr = .2 * .75,
end.cpr = 6 * .75,
seasoning.period = 30)
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 200000000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "PPC",
begin.cpr = .2 * 1.25,
end.cpr = 6 * 1.25,
seasoning.period = 30)
LoanAge <- seq(1, 360, 1)
Upper <- UpperPSA@ScheduledPrin + UpperPSA@PrepaidPrin
Lower <- LowerPSA@ScheduledPrin + LowerPSA@PrepaidPrin
Pac <- data.frame(cbind(LoanAge, Upper, Lower))
View(Pac)
Pac <- melt(Pac, id = "LoanAge")
View(Pac)
ggplot(Pac, aes(x = Month, y= value/1000, linetype = variable)) +
geom_line()+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
scale_fill_grey(name = "", labels = c("75 PSA", "250 PSA")) +
theme(legend.position="bottom", legend.background = element_rect(fill = "white", colour = "white")) +
theme(legend.key= element_rect(fill="white", colour= "white"))+
theme(legend.title=element_blank())
View(Pac)
ggplot(Pac, aes(x = LoanAge, y= value/1000, linetype = variable)) +
geom_line()+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
scale_fill_grey(name = "", labels = c("75 PSA", "250 PSA")) +
theme(legend.position="bottom", legend.background = element_rect(fill = "white", colour = "white")) +
theme(legend.key= element_rect(fill="white", colour= "white"))+
theme(legend.title=element_blank())
ggplot(Pac, aes(x = LoanAge, y= value/1000, linetype = variable)) +
geom_area(alpha = .7)+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
scale_fill_manual(name = "", labels = c("75 PSA", "250 PSA"), values = cbbPalette) +
theme(legend.position="bottom", legend.background = element_rect(fill = "white", colour = "white")) +
theme(legend.key= element_rect(fill="white", colour= "white"))+
theme(legend.title=element_blank())
ggplot(Pac, aes(x = LoanAge, y= value/1000, linetype = variable)) +
geom_area(alpha = .7)+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
scale_fill_manual(name = "", labels = c("75 PSA", "250 PSA"), values = cbbPalette) +
theme(legend.position="bottom", legend.background = element_rect(fill = "white", colour = "white")) +
theme(legend.key= element_rect(fill="white", colour= "white"))+
theme(legend.title=element_blank())
ggplot(Pac, aes(x = LoanAge, y= value/1000, fill = variable)) +
geom_area(alpha = .7)+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
scale_fill_manual(name = "", labels = c("75 PSA", "250 PSA"), values = cbbPalette) +
theme(legend.position="bottom", legend.background = element_rect(fill = "white", colour = "white")) +
theme(legend.key= element_rect(fill="white", colour= "white"))+
theme(legend.title=element_blank())
ggplot(Pac, aes(x = LoanAge, y= value/1000, linetype = variable)) +
geom_line()+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
scale_fill_grey(name = "", labels = c("75 PSA", "250 PSA")) +
theme(legend.position="bottom", legend.background = element_rect(fill = "white", colour = "white")) +
theme(legend.key= element_rect(fill="white", colour= "white"))+
theme(legend.title=element_blank())
LoanAge <- seq(1, 360, 1)
Upper <- UpperPSA@ScheduledPrin + UpperPSA@PrepaidPrin
Lower <- LowerPSA@ScheduledPrin + LowerPSA@PrepaidPrin
Pac <- data.frame(cbind(LoanAge, Upper, Lower))
colnames(Pac) <- c("LoanAge", "250 PSA", "75 PSA")
Pac <- melt(Pac, id = "LoanAge")
ggplot(Pac, aes(x = LoanAge, y= value/1000, colour = variable, linetype = variable)) +
geom_line(size = 1)+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
#scale_fill_grey(name = "", labels = c("75 PSA", "250 PSA")) +
theme(legend.position="bottom", legend.background = element_rect(fill = "white", colour = "white")) +
theme(legend.key= element_rect(fill="white", colour= "white"))+
theme(legend.title=element_blank())
ggplot(Pac, aes(x = LoanAge, y= value/1000, colour = variable, linetype = variable)) +
geom_line(size = 1)+
labs(colour = "Legend", linetype = "Legend", x = "Loan Age (Mos.)", y = "Principal Payment (,000s") +
scale_colour_manual(values = cbbPalette) +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
theme(legend.position="bottom", legend.background = element_rect(fill = "white", colour = "white")) +
theme(legend.key= element_rect(fill="white", colour= "white"))+
theme(legend.title=element_blank())
ggplot(Pac, aes(x = LoanAge, y= value/1000, colour = variable, linetype = variable)) +
geom_line(size = 1)+
labs(colour = "Legend", linetype = "Legend", x = "Loan Age (Mos.)", y = "Principal Payment (,000s)") +
scale_colour_manual(values = cbbPalette) +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
theme(legend.position="bottom", legend.background = element_rect(fill = "white", colour = "white")) +
theme(legend.key= element_rect(fill="white", colour= "white"))+
theme(legend.title=element_blank())
LoanAge <- seq(1, 360, 1)
Upper <- UpperPSA@ScheduledPrin + UpperPSA@PrepaidPrin
Lower <- LowerPSA@ScheduledPrin + LowerPSA@PrepaidPrin
Pac <- data.frame(cbind(LoanAge, Upper, Lower))
View(Pac)
Pac$Sced <- min(Pac$Upper, PAC$Lower)
Pac$Sced <- min(Pac$Upper, Pac$Lower)
View(Pac)
Pac <- data.frame(PAC.Sched[,4])
Pac <- data.frame(Pac[,4])
View(Pac)
LoanAge <- seq(1, 360, 1)
Upper <- UpperPSA@ScheduledPrin + UpperPSA@PrepaidPrin
Lower <- LowerPSA@ScheduledPrin + LowerPSA@PrepaidPrin
Pac <- data.frame(cbind(LoanAge, Upper, Lower))
Pac$Sced <- min(Pac$Upper, Pac$Lower)
View(Pac)
LoanAge <- seq(1, 360, 1)
Upper <- UpperPSA@ScheduledPrin + UpperPSA@PrepaidPrin
Lower <- LowerPSA@ScheduledPrin + LowerPSA@PrepaidPrin
Pac <- data.frame(cbind(LoanAge, Upper, Lower))
Pac$Sced <- pmin(Pac$Upper, Pac$Lower)
View(Pac)
Pac <- data.frame(cbind(LoanAge, Pac))
colnames(Pac) <- c("Month","PACS Payment Schedule ")
Pac <- melt(Pac, id = "Month")
ggplot(Pac, aes(x = Month, y= value/1000, fill = variable)) +
geom_area(fill = "grey")+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
theme(legend.position="none") +
annotate("text", x=175, y = 700, label = c("PSA Inflection Point")) +
geom_segment(aes(x= 225, y = 670, xend = 125, yend = 670), arrow = arrow(length = unit(0.2, "cm")))
View(Pac)
LoanAge <- seq(1, 360, 1)
Upper <- UpperPSA@ScheduledPrin + UpperPSA@PrepaidPrin
Lower <- LowerPSA@ScheduledPrin + LowerPSA@PrepaidPrin
Pac <- data.frame(cbind(LoanAge, Upper, Lower))
Pac$Sced <- pmin(Pac$Upper, Pac$Lower)
Pac <- data.frame(Pac[,4])
Pac <- data.frame(cbind(LoanAge, Pac))
colnames(Pac) <- c("Month","PACS Payment Schedule ")
ggplot(Pac, aes(x = Month, y= value/1000, fill = variable)) +
geom_area(fill = "grey")+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
theme(legend.position="none") +
annotate("text", x=175, y = 700, label = c("PSA Inflection Point")) +
geom_segment(aes(x= 225, y = 670, xend = 125, yend = 670), arrow = arrow(length = unit(0.2, "cm")))
View(Pac)
Pac <- melt(Pac, id = "Month")
View(Pac)
ggplot(Pac, aes(x = Month, y= value/1000, fill = variable)) +
geom_area(fill = "grey")+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
theme(legend.position="none") +
annotate("text", x=175, y = 700, label = c("PSA Inflection Point")) +
geom_segment(aes(x= 225, y = 670, xend = 125, yend = 670), arrow = arrow(length = unit(0.2, "cm")))
ggplot(Pac, aes(x = Month, y= value/1000, fill = variable)) +
geom_area(fill = "#0072B2")+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
theme(legend.position="none") +
annotate("text", x=175, y = 700, label = c("PSA Inflection Point")) +
geom_segment(aes(x= 225, y = 670, xend = 125, yend = 670), arrow = arrow(length = unit(0.2, "cm")))
ggplot(Pac, aes(x = Month, y= value/1000, fill = variable)) +
geom_area(fill = "#0072B2", alpah = .75)+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
theme(legend.position="none") +
annotate("text", x=175, y = 700, label = c("PSA Inflection Point")) +
geom_segment(aes(x= 225, y = 670, xend = 125, yend = 670), arrow = arrow(length = unit(0.2, "cm")))
ggplot(Pac, aes(x = Month, y= value/1000, fill = variable)) +
geom_area(fill = "#0072B2", alpha = .75)+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
theme(legend.position="none") +
annotate("text", x=175, y = 700, label = c("PSA Inflection Point")) +
geom_segment(aes(x= 225, y = 670, xend = 125, yend = 670), arrow = arrow(length = unit(0.2, "cm")))
ggplot(Pac, aes(x = Month, y= value/1000, fill = variable)) +
geom_area(fill = "#0072B2", alpha = .85)+
xlab("Time Period (mos.)") +
ylab("Principal Payment (,000s)") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 20)) +
theme(axis.title = element_text(size = 15)) +
theme(axis.text.y = element_text(angle = 90, size = 15)) +
theme(legend.position="none") +
annotate("text", x=175, y = 700, label = c("PSA Inflection Point")) +
geom_segment(aes(x= 225, y = 670, xend = 125, yend = 670), arrow = arrow(length = unit(0.2, "cm")))
