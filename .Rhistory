theme_minimal() +
#scale_y_continuous(limits = c(0, 100), breaks = seq(0, 100, 10)) +
scale_x_continuous(breaks = seq(10, 40, 2)) +
ylab("Frequency")+
xlab("Path Price") +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(SEQIO.OAS.Price, aes(x = value )) +
geom_histogram(colour = "black", fill = "lightgrey") +
#geom_histogram(aes(y =..density..), color = "black", fill = "lightgrey") +
#geom_density() +
theme_minimal() +
#scale_y_continuous(limits = c(0, 100), breaks = seq(0, 100, 10)) +
scale_x_continuous(breaks = seq(10, 40, .02)) +
ylab("Frequency")+
xlab("Path Price") +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(SEQIO.OAS.Price, aes(x = value )) +
geom_histogram(colour = "black", fill = "lightgrey") +
#geom_histogram(aes(y =..density..), color = "black", fill = "lightgrey") +
#geom_density() +
theme_minimal() +
#scale_y_continuous(limits = c(0, 100), breaks = seq(0, 100, 10)) +
scale_x_continuous(breaks = seq(10, 40, .25)) +
ylab("Frequency")+
xlab("Path Price") +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(SEQIO.OAS.Price, aes(x = value )) +
geom_histogram(colour = "black", fill = "lightgrey") +
#geom_histogram(aes(y =..density..), color = "black", fill = "lightgrey") +
#geom_density() +
theme_minimal() +
#scale_y_continuous(limits = c(0, 100), breaks = seq(0, 100, 10)) +
scale_x_continuous(breaks = seq(10, 40, .5)) +
ylab("Frequency")+
xlab("Path Price") +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
set.seed(300)
SEQIO.OAS <- REMIC.OAS(bond.id = "BondLabSEQIO4",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
collateral.price = 105.75,
tranche.price = 20,
short.rate = 0.0016,
sigma = 0.015,
paths = 5000)
# This is 14.13
SEQIO.OAS.Price <- data.frame(SEQIO.OAS@PriceDist)
SEQIO.OAS.Price <- cbind(SEQIO.OAS.Price, seq(1: length(SEQIO.OAS.Price)))
colnames(SEQIO.OAS.Price) <- c("value", "count")
ggplot(SEQIO.OAS.Price, aes(x = value )) +
geom_histogram(colour = "black", fill = "lightgrey") +
#geom_histogram(aes(y =..density..), color = "black", fill = "lightgrey") +
#geom_density() +
theme_minimal() +
#scale_y_continuous(limits = c(0, 100), breaks = seq(0, 100, 10)) +
scale_x_continuous(breaks = seq(10, 40, .5)) +
ylab("Frequency")+
xlab("Path Price") +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
set.seed(300)
SEQIO.OAS <- REMIC.OAS(bond.id = "BondLabSEQIO4",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
collateral.price = 105.75,
tranche.price = 20,
short.rate = 0.0016,
sigma = 0.015,
paths = 5000)
# This is 14.13
SEQIO.OAS.Price <- data.frame(SEQIO.OAS@PriceDist)
SEQIO.OAS.Price <- cbind(SEQIO.OAS.Price, seq(1: length(SEQIO.OAS.Price)))
colnames(SEQIO.OAS.Price) <- c("value", "count")
ggplot(SEQIO.OAS.Price, aes(x = value )) +
geom_histogram(colour = "black", fill = "lightgrey") +
#geom_histogram(aes(y =..density..), color = "black", fill = "lightgrey") +
#geom_density() +
theme_minimal() +
#scale_y_continuous(limits = c(0, 100), breaks = seq(0, 100, 10)) +
scale_x_continuous(breaks = seq(10, 40, .5)) +
ylab("Frequency")+
xlab("Path Price") +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
29/37
115 * .78
16/.32
115 * .89
115*.78
115 * .22
5/7.2
4/35
35/5
5/7
5/7 * 3
148.7/200
1-.7435
2.2 * .7435
4 - 1.6357
2.3643 / .2565
.7435 * 2.2
.2565 * 9.21
.2565 * 9.21 + 1.6357
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 5000)
install.packages("termstrc")
install.packages("reshape2")
install.packages("ggplot2")
install.packages("lubridate")
install.packages("plyr")
install.packages("optimx")
library(BondLab)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 5000)
set.seed(300)
PO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSPO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 70.75,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 5000)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 25,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
set.seed(300)
PO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSPO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 70.75,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
set.seed(300)
PO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSPO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 80.75,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 25,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
set.seed(300)
PO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSPO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 70.75,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
Key.Rate.Duration <- cbind(bondlabMBS4@KeyRateTenor, bondlabMBS4@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), y = Duration)) +
geom_bar()+
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
geom_bar(stat = "identity", fill = "grey", colour = "grey") +
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
Key.Rate.Duration <- cbind(REMICIOAnalysis@KeyRateTenor, REMICIOAnalysis@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), y = Duration)) +
geom_bar()+
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
geom_bar(stat = "identity", fill = "grey", colour = "grey") +
scale_y_continuous(limits= c(-10, 2)) +
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
REMICIOAnalysis <-  REMICAnalytics(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL",
CPR = 3)
REMICIOAnalysis <-  REMICAnalytics(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 20,
PrepaymentAssumption = "MODEL",
CPR = 3)
REMICIOAnalysis <-  REMICAnalytics(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 5,
PrepaymentAssumption = "MODEL",
CPR = 3)
REMICIOAnalysis <-  REMICAnalytics(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 5,
PrepaymentAssumption = "CPR",
CPR = 8)
REMICIOAnalysis <-  REMICAnalytics(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 25,
PrepaymentAssumption = "CPR",
CPR = 8)
#data for table 14.4
yield.table <- array(data = NA, c(5,5))
for(i in 1:5){
price = c(20, 25, 30, 35, 40)
for(s in 1: 5){
cpr = c(3, 6, 8, 10, 12)
MortgageCashFlow <-  REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
collateral.price = 105.75,
tranche.price = as.numeric(price[i]),
PrepaymentAssumption = "CPR",
CPR = cpr[s])
yield.table[i,s] <- MortgageCashFlow@YieldToMaturity
}
yield.table <<- yield.table
}
View(yield.table)
REMICIOAnalysis <-  REMICAnalytics(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 25,
PrepaymentAssumption = "CPR",
CPR = 6)
REMICCashFlow <- REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-17-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL")
REMICCashFlow <- REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-17-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL")
REMICCashFlow <- REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-17-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL")
4/1200
4/12
4/100
4/100/12
REMICCashFlow <- REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-17-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL")
REMICCashFlow <- REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-17-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL")
REMICCashFlow <- REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-17-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL")
REMICCashFlow <- REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-17-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL")
REMICCashFlow <- REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-17-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL")
REMICCashFlow <- REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-17-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL")
REMICCashFlow <- REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-17-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL")
REMICCashFlow <- REMICCashFlow(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-17-2013",
method = "ns",
collateral.price = 105.75,
tranche.price = 35,
PrepaymentAssumption = "MODEL")
REMICCollateral(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
collateral.price = 105.75,
PrepaymentAssumption = "CPR",
CPR = 6)
REMICCollateral(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
collateral.price = 105.75,
PrepaymentAssumption = "CPR",
CPR = 6)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
4/12
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
REMIC <- readRDS("~/BondLab/REMICData/BondLabSMBS.rds")
REMIC@Tranches[[1]]@TrancheCoupon
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 1)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 1)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 1)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 200)
set.seed(300)
IO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSIO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 35,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 5000)
set.seed(300)
PO.OAS <- REMIC.OAS(bond.id = "BondLabSMBSPO",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
tranche.price = 70.75,
collateral.price = 105.75,
short.rate = .0016,
sigma = .015,
paths  = 5000)
148.7 + 34.2
(200 * 1.0575) - (148.7 + 34.2)
((200 * 1.0575) - (148.7 + 34.2))/17.1
((200 * 1.0575) - (148.7 * 1.02 + 34.2 * 1.01))/17.1
((200 * 1.0575) - (148.7 * 1.02 + 34.2 * 1.02))/17.1
((200 * 1.0575) - (148.7 * 1.03 + 34.2 * 1.02))/17.1
((200 * 1.0575) - (148.7 * 1.05 + 34.2 * 1.02))/17.1
((200 * 1.0575) - (148.7 * 1.02 + 34.2 * 1.02))/17.1
4/(4*1.5)
4/(4/1.5)
4/(4/2)
4+(4/1.5)
4.0 * 51.3
(205.2 - 10.26)/17.1
205.2 - 10.26
194.4/17.1
-1.5 * .083 + 11.37
library(BondLab)
library(BondLab)
