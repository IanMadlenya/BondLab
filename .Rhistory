library(BondLab)
setwd("~/BondLab")
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 105.75, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
library(BondLab)
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 105.75, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
ExtractScenario <- function(bond.id = character){
ScenarioName = list()
ScenarioCPR = list()
ScenarioYieldToMaturity = list()
ScenarioSpreadToCurve = list()
ScenarioWAL = list()
ScenarioModDuration = list()
for(i in 1:6){
ScenarioName = append(ScenarioName,bond.id@Scenario[i][[1]]@Name)
ScenarioCPR = append(ScenarioCPR,  SMMVector.To.CPR(bond.id@Scenario[i][[1]]@SMM, length(bond.id@Scenario[i][[1]]@SMM)) * 100)
ScenarioYieldToMaturity = append(ScenarioYieldToMaturity, bond.id@Scenario[i][[1]]@YieldToMaturity * 100)
ScenarioSpreadToCurve = append(ScenarioSpreadToCurve, bond.id@Scenario[i][[1]]@SpreadToInterCurve)
ScenarioWAL = append(ScenarioWAL, bond.id@Scenario[i][[1]]@WAL)
ScenarioModDuration = append(ScenarioModDuration, bond.id@Scenario[i][[1]]@ModDuration)
}
Result <- cbind(ScenarioName, ScenarioCPR, ScenarioYieldToMaturity, ScenarioSpreadToCurve, ScenarioWAL, ScenarioModDuration)
return(Result)
}
xtable(t(ExtractScenario(bondlabMBS4)), digits = 2)
library("xtable", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
xtable(t(ExtractScenario(bondlabMBS4)), digits = 2)
bondlabMBS55 <- new("MBSDetails",
Cusip = "23456789",
ID = "bondlabMBS4",
BondType = "MBS",
Sector = "MBS",
Coupon = 5.5,
IssueDate = "01-01-2010",
DatedDate = "01-01-2010",
Maturity = "01-01-2040",
LastPmtDate = "01-01-2013",
NextPmtDate = "02-01-2013",
PaymentDelay = 24,
Moody = "Aaa",
SP = "AAA",
BondLab = "Aaa",
Frequency = 12,
BondBasis = "30360",
GWac = 6.1,
AmortizationType = "fixed",
AmortizationTerm = 30,
Index = "None",
Margin = 0,
FirstPmtDate = "01-01-2010",
FinalPmtDate = "01-01-2040",
Servicing = 0.25,
PMI = 0.25,
Gfee = 0.25,
InitialInterest = "no",
InterestOnlyPeriod = 0,
FirstPrinPaymentDate = "1-01-2010",
BalloonPmt = "no",
BalloonDate = "00-00-0000",
MBSFactor = 1,
Model = "FH30.Generic",
Burnout = 25
)
setwd("~/BondLab/PrepaymentModel")
setwd("~/BondLab/BondData")
saveRDS(bondlabMBS55, "bondlabMBS55.rds")
bondlabMBS55 <- PassThroughAnalytics(bond.id = "bondlabMBS55", original.bal = 100000, price = 107.50, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
xtable(t(ExtractScenario(bondlabMBS55)), digits = 2)
#This is how I access the class Scenario Set
plot((1-(1-bondlabMBS55@SMM)^12)*100, type = "l")
xtable(t(ExtractScenario(bondlabMBS55)), digits = 2)
xtable(t(ExtractScenario(bondlabMBS4)), digits = 2)
#This is how I access the class Scenario Set
plot((1-(1-bondlabMBS4@Scenario[2][[1]]@SMM)^12)*100, type = "l")
#This is how I access the class Scenario Set
plot((1-(1-bondlabMBS4@Scenario[3][[1]]@SMM)^12)*100, type = "l")
library(BondLab)
#This is how I access the class Scenario Set
plot((1-(1-bondlabMBS4@SMM)^12)*100, type = "l")
#This is how I access the class Scenario Set
plot((1-(1-bondlabMBS55@SMM)^12)*100, type = "l")
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 105.75, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
bondlabMBS55 <- PassThroughAnalytics(bond.id = "bondlabMBS55", original.bal = 100000, price = 107.50, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
xtable(t(ExtractScenario(bondlabMBS4)), digits = 2)
xtable(t(ExtractScenario(bondlabMBS55)), digits = 2)
system.time(PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 107.5, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL"))
bondlabMBS55 <- PassThroughAnalytics(bond.id = "bondlabMBS55", original.bal = 100000, price = 107.50, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
xtable(t(ExtractScenario(bondlabMBS4)), digits = 2)
xtable(t(ExtractScenario(bondlabMBS55)), digits = 2)
bondlabMBS55 <- new("MBSDetails",
Cusip = "23456789",
ID = "bondlabMBS55",
BondType = "MBS",
Sector = "MBS",
Coupon = 5.5,
IssueDate = "01-01-2010",
DatedDate = "01-01-2010",
Maturity = "01-01-2040",
LastPmtDate = "01-01-2013",
NextPmtDate = "02-01-2013",
PaymentDelay = 24,
Moody = "Aaa",
SP = "AAA",
BondLab = "Aaa",
Frequency = 12,
BondBasis = "30360",
GWac = 6.1,
AmortizationType = "fixed",
AmortizationTerm = 30,
Index = "None",
Margin = 0,
FirstPmtDate = "01-01-2010",
FinalPmtDate = "01-01-2040",
Servicing = 0.25,
PMI = 0.25,
Gfee = 0.25,
InitialInterest = "no",
InterestOnlyPeriod = 0,
FirstPrinPaymentDate = "1-01-2010",
BalloonPmt = "no",
BalloonDate = "00-00-0000",
MBSFactor = 1,
Model = "FH30.Generic",
Burnout = 25
)
setwd("~/BondLab/BondData")
saveRDS(bondlabMBS55, "bondlabMBS55.rds")
saveRDS(bondlabMBS55, "bondlabMBS55.rds")
bondlabMBS55 <- PassThroughAnalytics(bond.id = "bondlabMBS55", original.bal = 100000, price = 107.50, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
xtable(t(ExtractScenario(bondlabMBS55)), digits = 2)
xtable(t(ExtractScenario(bondlabMBS4)), digits = 2)
xtable(t(ExtractScenario(bondlabMBS4)), digits = 2)
xtable(t(ExtractScenario(bondlabMBS55)), digits = 2)
library(BondLab)
library(BondLab)
setwd("~/BondLab")
bondlabMBS44
bondlabMBS4
library("shiny", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
bondlabMBS44
bondlabMBS4
bondlanMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013",  scenario.set = c("UA100", "UA150"),
PrepaymentAssumption = "CPR", CPR = 6)
bondlabMBS44
bondlabMBS4
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 105.75, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set  = c("UA100", "UA150"),
PrepaymentAssumption = "PPC", begin.cpr = .2, end.cpr = 6, seasoning.period = 30)
test
PPC
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013",  scenario.set = c("UA100", "UA150"),
PrepaymentAssumption = "CPR", CPR = 6
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013",  scenario.set = c("UA100", "UA150"),
PrepaymentAssumption = "CPR", CPR = 6)
PPC
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 105.75, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
bonlabMBS4
bondlabMBS4
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set  = c("UA100", "UA150"),
PrepaymentAssumption = "PPC", begin.cpr = 1.5, end.cpr = 8, seasoning.period = 30)
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set  = c(),
PrepaymentAssumption = "PPC", begin.cpr = 1.5, end.cpr = 8, seasoning.period = 30)
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set  = c("NC"),
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set  = c("NC"),
PrepaymentAssumption = "PPC", begin.cpr = 1.5, end.cpr = 8, seasoning.period = 30)
PPC
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set  = c(),
PrepaymentAssumption = "PPC", begin.cpr = 1.5, end.cpr = 8, seasoning.period = 30)
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013",
PrepaymentAssumption = "PPC", begin.cpr = 1.5, end.cpr = 8, seasoning.period = 30)
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set  = c("NC"),
PrepaymentAssumption = "PPC", begin.cpr = 1.5, end.cpr = 8, seasoning.period = 30)
PPC
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 105.75, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("NC"),
PrepaymentAssumption = "MODEL")
bondlabMBS4
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 105.75, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
#This is how I access the class Scenario Set
plot((1-(1-bondlabMBS4@Scenario[3][[1]]@SMM)^12)*100, type = "l")
#This is how I access the class Scenario Set
plot((1-(1-bondlabMBS4@Scenario[4][[1]]@SMM)^12)*100, type = "l")
#This is how I access the class Scenario Set
plot((1-(1-bondlabMBS4@Scenario[5][[1]]@SMM)^12)*100, type = "l")
rm(bondlabMBS4)
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 105.75, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
#This is how I access the class Scenario Set
plot((1-(1-bondlabMBS4@Scenario[5][[1]]@SMM)^12)*100, type = "l")
rm(bondlabMBS4)
rm(bondlaMBS4)
rm(bondlanMBS4)
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 105.75, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
library(BondLab)
bondlabMBS55 <- PassThroughAnalytics(bond.id = "bondlabMBS55", original.bal = 100000, price = 107.50, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
library(BondLab)
bondlabMBS55 <- PassThroughAnalytics(bond.id = "bondlabMBS55", original.bal = 100000, price = 107.50, trade.date = "01-10-2013",
settlement.date = "01-13-2013", scenario.set = c("DA50", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
setwd("~/BondLab/BondLabUI")
setwd("~/BondLab/BondLabUI")
setwd("~/BondLab/BondLabUI/BondLabAnalysis")
saveRDS(bondlabMBS55, "bondlabMBS55.rds")
setwd("~/BondLab")
runApp("~/BondLab/BondLabUI")
# Bond Lab user interface using shiny application
library(shiny)
#Define UI for Bond Lab
shinyUI(fluidPage(
#Application title
titlePanel(h1("Bond Lab ™")), # application title ends here
#sidebar with controls to enter the cusip number and tradedate
sidebarLayout(
sidebarPanel(
helpText("Input Values"),
textInput("Bond.id", "BondID:", value = ""),
numericInput("orig.bal", "Original Balance", value = 100000, min = 1000, max = 1000000000, step = NA),
numericInput("price", "Price:", value = 100, min = 1, max = 100000, step = NA),
textInput("trade.date", "Trade Date:", value = ""),
textInput("settlement.date", "Settlement Date:", value = ""),
textInput("scenario.set", "Scenario Set", value = "NC")
),# sidebarPanel close parenthesis
mainPanel(
h2("Bond Analytics")
#dataTableOutput("summary.table")
) # mail panel close parenthesis here
) # sidebar layout close parenthesis here
))
library(shiny)
library(BondLab)
library(BondLab)
# Need to make bondlabfile result a standard name
# Need to open as a connection
#MBS.Analytics <- readRDS("~BondLab/BondLabUI/BondLabAnalysis/bondlabMBS55.rds")
source("helpers.R")
#define server logic to show Bond Lab analysis output
shinyServer(function(input, output){
output$summary.table <- renderTable({data.frame(summary.table)})
})
runApp("~/BondLab/BondLabUI")
library("BondLab", lib.loc="/Library/Frameworks/R.framework/Versions/3.0/Resources/library")
PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013",  scenario.set = c("UA100", "UA150"),
PrepaymentAssumption = "MODEL")
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4", original.bal = 100000, price = 100, trade.date = "01-10-2013",
settlement.date = "01-13-2013",  scenario.set = c("UA100", "UA150"),
PrepaymentAssumption = "MODEL")
setwd("~/BondLab/RatesData")
rate.data <- readRDS("2013-01-10.rds")
yr15 = "function"
library(BondLab)
library(BondLab)
rm(yr15)
setwd("~/BondLab/PrepaymentModel")
setwd("~/BondLab/PrepaymentModel")
setwd("~/BondLab/PrepaymentModel")
setwd("~/BondLab/PrepaymentModel")
setwd("~/BondLab/BondData")
