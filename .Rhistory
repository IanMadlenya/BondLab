library(lubridate)
#make graph4.2
BaseCase <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000, price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "PPC",
scenario.set = c("NC"),
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30)
Steep50 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000, price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "PPC",
scenario.set = c("Steep50"),
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30)
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steepen = Steepen)
colnames(graph4_2.Data) <- c("Maturity", "Base Case", "Steepen")
graph4_2.Data <- melt(graph4_2.Data, id = "Maturity")
#making the graph 4_2
ggplot(graph4_2.Data, aes(x = Maturity, y = value, colour = variable, linetype = variable)) +
geom_line(size = 1.5) +
labs(colour = "Legend", linetype = "Legend", x = "Maturity (years)", y = "Fixed Rate Payer Side") +
scale_colour_manual(values = cbbPalette) +
theme_minimal()+
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(legend.position=c(.80,.17), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank())+
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
#scale_colour_grey(name = "Legend", labels = c("Base Case", "Spot Steepen")) +
theme(legend.key= element_rect(fill="white", colour= "white"))
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steepen = Steepen)
colnames(graph4_2.Data) <- c("Maturity", "Base Case", "Steepen")
graph4_2.Data <- melt(graph4_2.Data, id = "Maturity")
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steep50 = Steep50)
colnames(graph4_2.Data) <- c("Maturity", "Base Case", "Steepen")
graph4_2.Data <- melt(graph4_2.Data, id = "Maturity")
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steep50 = Steep50)
BaseCase <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000, price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "PPC",
scenario.set = c("NC"),
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30)
BaseCase <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000, price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("NC"),
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30)
Steep50 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000, price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("Steep50"),
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30)
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steep50 = Steep50)
colnames(graph4_2.Data) <- c("Maturity", "Base Case", "Steepen")
graph4_2.Data <- melt(graph4_2.Data, id = "Maturity")
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase@spotrate, Steep50 = Steep50@spoterate)
colnames(graph4_2.Data) <- c("Maturity", "Base Case", "Steepen")
graph4_2.Data <- melt(graph4_2.Data, id = "Maturity")
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase@spotrate, Steep50 = Steep50@spoterate)
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase@spotrate, Steep50 = Steep50@spotrate)
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase@spotrate[1:360], Steep50 = Steep50@spotrate[1:360])
colnames(graph4_2.Data) <- c("Maturity", "Base Case", "Steepen")
graph4_2.Data <- melt(graph4_2.Data, id = "Maturity")
#making the graph 4_2
ggplot(graph4_2.Data, aes(x = Maturity, y = value, colour = variable, linetype = variable)) +
geom_line(size = 1.5) +
labs(colour = "Legend", linetype = "Legend", x = "Maturity (years)", y = "Fixed Rate Payer Side") +
scale_colour_manual(values = cbbPalette) +
theme_minimal()+
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(legend.position=c(.80,.17), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank())+
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
#scale_colour_grey(name = "Legend", labels = c("Base Case", "Spot Steepen")) +
theme(legend.key= element_rect(fill="white", colour= "white"))
View(graph4_2.Data)
SpotCurve <- spr_ns(c(4.26591, -3.54742, 2.46095, 7.49599), m = 1:30)
BaseCase <- forwardrates("ns", c(4.26591, -3.54742, 2.46095, 7.49599), m = 1:30)
Steepen <- forwardrates("ns", c(4.50010 ,-4.50010, 3.12692, 5.89599 ), m = 1:30)
Flatten <- forwardrates("ns", c(2.657853, -1.351632, 5.486934, 16.29599), m = 1:30)
Maturity <- as.numeric(seq(1:30))
Coupon <- SpotCurve - .25
#make graph 4.1
graph4_1.Data <- data.frame(Maturity = Maturity, CouponCurve = Coupon, SpotRateCurve = SpotCurve, ZVSpread = SpotCurve +.20, YTM = 3.25)
graph4_1.Data <- melt(graph4_1.Data, id = "Maturity")
ggplot(graph4_1.Data, aes(x= Maturity, y = value, colour = variable))+
geom_line(aes(linetype = variable), size = 1)+
scale_linetype_manual(values = c("solid", "dashed", "dotted", "twodash")) +
geom_vline(xintercept = 10)+
theme_minimal()+
ylab("Swap Rate") +
xlab("Maturity (years)") +
scale_colour_manual(values = cbbPalette) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(legend.position=c(.80,.25), legend.background = element_rect(fill = "transparent", colour = "white"))+
theme(legend.title=element_blank())+
annotate("pointrange", x = 9, y = 2.95, ymin = 2.65, ymax = 3.25, colour = "black", size = .5)+
annotate("text", x=4.35, y = 2.9, label = c("Nominal Spread")) +
annotate("pointrange", x= 19, y = 3.78, ymin = 3.67, ymax = 3.89, colour = "black", size = .5) +
geom_segment(aes(x= 1, y = 2.8, xend = 8.75, yend = 2.8), arrow = arrow(length = unit(0.2, "cm")), colour = "black") +
annotate("text", x=14.75, y = 3.85, label = c("ZV-Spread")) +
geom_segment(aes(x= 12.5, y = 3.75, xend = 18.5, yend = 3.75), arrow = arrow(length = unit(0.2, "cm")), colour = "black") +
annotate("text", x=4.35, y = 4.25, label = c("Cheap Cash Flows\n PV Spot > PV YTM"), size = 4) +
annotate("text", x=16, y = 4.25, label = c("Rich Cash Flows\n PV Spot < PV YTM"), size = 4)
#annotate("text", x = 5, y = .50, label = c("Copyright BondLab Technologies"), size = 4)
#make graph4.2
BaseCase <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000, price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("NC"),
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30)
Steep50 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000, price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("Steep50"),
begin.cpr = .2,
end.cpr = 6,
seasoning.period = 30)
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steepen = Steepen)
colnames(graph4_2.Data) <- c("Maturity", "Base Case", "Steepen")
graph4_2.Data <- melt(graph4_2.Data, id = "Maturity")
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steepen = Steepen)
Maturity <- as.numeric(seq(1:30))
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steepen = Steepen)
Steepen <- forwardrates("ns", c(4.50010 ,-4.50010, 3.12692, 5.89599 ), m = 1:30)
Flatten <- forwardrates("ns", c(2.657853, -1.351632, 5.486934, 16.29599), m = 1:30)
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steepen = Steepen)
colnames(graph4_2.Data) <- c("Maturity", "Base Case", "Steepen")
graph4_2.Data <- melt(graph4_2.Data, id = "Maturity")
#making the graph 4_2
ggplot(graph4_2.Data, aes(x = Maturity, y = value, colour = variable, linetype = variable)) +
geom_line(size = 1.5) +
labs(colour = "Legend", linetype = "Legend", x = "Maturity (years)", y = "Fixed Rate Payer Side") +
scale_colour_manual(values = cbbPalette) +
theme_minimal()+
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(legend.position=c(.80,.17), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank())+
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
#scale_colour_grey(name = "Legend", labels = c("Base Case", "Spot Steepen")) +
theme(legend.key= element_rect(fill="white", colour= "white"))
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steepen = Steepen)
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steepen = Steepen)
SpotCurve <- spr_ns(c(4.26591, -3.54742, 2.46095, 7.49599), m = 1:30)
BaseCase <- forwardrates("ns", c(4.26591, -3.54742, 2.46095, 7.49599), m = 1:30)
Steepen <- forwardrates("ns", c(4.50010 ,-4.50010, 3.12692, 5.89599 ), m = 1:30)
Flatten <- forwardrates("ns", c(2.657853, -1.351632, 5.486934, 16.29599), m = 1:30)
Maturity <- as.numeric(seq(1:30))
Coupon <- SpotCurve - .25
graph4_2.Data <- data.frame(Maturity = Maturity, BaseCase= BaseCase, Steepen = Steepen)
colnames(graph4_2.Data) <- c("Maturity", "Base Case", "Steepen")
colnames(graph4_2.Data) <- c("Maturity", "Base Case", "Steepen")
graph4_2.Data <- melt(graph4_2.Data, id = "Maturity")
#making the graph 4_2
ggplot(graph4_2.Data, aes(x = Maturity, y = value, colour = variable, linetype = variable)) +
geom_line(size = 1.5) +
labs(colour = "Legend", linetype = "Legend", x = "Maturity (years)", y = "Fixed Rate Payer Side") +
scale_colour_manual(values = cbbPalette) +
theme_minimal()+
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(legend.position=c(.80,.17), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank())+
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
#scale_colour_grey(name = "Legend", labels = c("Base Case", "Spot Steepen")) +
theme(legend.key= element_rect(fill="white", colour= "white"))
data43 <- as.data.frame(cbind(seq(1, 360, 1), base@TotalCashFlow, steepen@Scenario[1][[1]]@TotalCashFlow))
colnames(data43) <- c("Period", "Base Case", "Steepen")
data43 <- melt(data43, id = c("Period"))
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.90), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank())
# make graph 4.3
# 1-01-3013 and 1-05-2013 are not trading days they are used to hold the yield curve scenarios presented in chapter 4
steepen <-PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000, price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = "Steep50")
base <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000, price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = "NC")
data43 <- as.data.frame(cbind(seq(1, 360, 1), base@TotalCashFlow, steepen@Scenario[1][[1]]@TotalCashFlow))
colnames(data43) <- c("Period", "Base Case", "Steepen")
data43 <- melt(data43, id = c("Period"))
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.90), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank())
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.90), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.text=element_text(10))
theme(legend.title=element_blank())
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.90), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.text=element_text(10)) +
theme(legend.title=element_blank())
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.90), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank())
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.90), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank()+
theme(legend.text=element_text(size= 15)))
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.70,.90), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank()+
theme(legend.text=element_text(size= 15)))
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.70), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank()+
theme(legend.text=element_text(size= 15)))
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.70), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank()+
theme(legend.text=element_text(size= 20)))
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.70), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank()+
theme(legend.text=element_text(size= 30)))
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.70), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank()+
theme(legend.text=element_text(size= 5)))
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.70), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank())+
theme(legend.text=element_text(size= 5))
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.70), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank())+
theme(legend.text=element_text(size= 25))
ggplot(data43, aes(x = Period, y = value, colour = variable, linetype = variable))+
geom_line(size = 1.0) +
theme_minimal()+
scale_x_continuous(breaks = c(1, 36, 60, 84, 120, 180, 240, 360)) +
scale_y_continuous(breaks = c(0, 250, 500, 750, 1000)) +
labs(colour = "Legend", linetype = "Legend", x = "PoolAge (Mos.)", y = "Cash Flow") +
scale_colour_manual(values = cbbPalette) +
scale_linetype_manual(values = c("solid", "dotdash")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
theme(legend.position=c(.80,.70), legend.background = element_rect(fill = "white", colour = "white"))+
theme(legend.title=element_blank())+
theme(legend.text=element_text(size= 15))
str(base)
base <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
PrepaymentAssumption = "MODEL",
scenario.set = "NC")
library("lubridate", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
base <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
PrepaymentAssumption = "MODEL",
scenario.set = "NC")
str(base)
3.31- 1.92
str(steepen)
steepen <-PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
PrepaymentAssumption = "MODEL",
scenario.set = "Steep50")
rm(Steep50)
str(steepen)
flatten <-PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
PrepaymentAssumption = "MODEL",
scenario.set = "Flat50")
str(flatten)
str(base)
str(steepen)
str(flatten)
1017.2875 + 60.23
1.077517^(1/4)
(1.077517^(1/4) - 1) * 2
15.19 + 15.15 + 15.11 + 15.08 + 15.04 + 15
1090.57/1000
(1090.57/1000) ^ (1/6)
((1090.57/1000) ^ (1/6)) -1 * 2
(((1090.57/1000) ^ (1/6)) -1) * 2
1017.2875 + 30.23
(((1047.517/1000) ^ (1/4)) -1) * 2
(((1047.517/1000) ^ (1/4)) -1)
(((1047.517/1000) ^ (1/4)) - 0)
0.25/100
(1.0025) ^ 3
.25/12
.000125 * 3
.000125 * 300
0.25/1200
.00021 * 1200
.000208 * 1200
1.000208 ^ 3
((1.000208 ^ 3) - 1) / .000208
3.00624 * 30 + 15
3.00624 * 15 + 15
1017.2875 + 60.23
1.077517^(1/4)
(1.077517^(1/4) -1) * 2
.01735 + .06005
((1 + .0774) ^ (1/4) - 1) * 2
PassThroughOAS
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
MakeMBSDetails
library(BondLab)
MakeMBSDetails()
library(BondLab)
MakeMBSDetails
library(BondLab)
MakeMBSDetails
library(BondLab)
MakeBondDetails
library(BondLab)
MakeBondDetails()
library(BondLab)
MakeBondDetails()
MakeBondDetails
library(BondLab)
MakeBondDetails
library(BondLab)
MakeBondDetails
source("chapter_3")
library(BondLab)
