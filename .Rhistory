#geom_segment(aes(x = 12.5, y = 0, xend = 12.5, yend = .95), linetype = "dotdash") +
theme_minimal() +
annotate("text", x = 4.5, y = .97, label = "95% Confidence") +
annotate("text", x = 4.5, y = .93, label = "12% Subordination") +
#annotate("text", x = 4.5, y = .72, label = "70% Confidence") +
#annotate("text", x = 4.5, y = .68, label = "8% Subordination") +
ylab("Cumulative Density of Loss Function")+
xlab("Cumulative Loss pct (%)") +
theme(panel.grid.major = element_line(size = .50, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(CumDensityData, aes(value * 100)) +
stat_ecdf() +
geom_segment(aes(x = 0, y = .95, xend = 8.5, yend = .7), linetype = "longdash") +
geom_segment(aes(x = 8.5, y = 0, xend = 8.5, yend = .99), linetype = "longdash") +
#geom_segment(aes(x = 0, y = .95, xend = 12.5, yend = .95), linetype = "dotdash") +
#geom_segment(aes(x = 12.5, y = 0, xend = 12.5, yend = .95), linetype = "dotdash") +
theme_minimal() +
annotate("text", x = 4.5, y = .97, label = "95% Confidence") +
annotate("text", x = 4.5, y = .93, label = "12% Subordination") +
#annotate("text", x = 4.5, y = .72, label = "70% Confidence") +
#annotate("text", x = 4.5, y = .68, label = "8% Subordination") +
ylab("Cumulative Density of Loss Function")+
xlab("Cumulative Loss pct (%)") +
theme(panel.grid.major = element_line(size = .50, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(CumDensityData, aes(value * 100)) +
stat_ecdf() +
geom_segment(aes(x = 0, y = .99, xend = 8.5, yend = .7), linetype = "longdash") +
geom_segment(aes(x = 8.5, y = 0, xend = 8.5, yend = .99), linetype = "longdash") +
#geom_segment(aes(x = 0, y = .95, xend = 12.5, yend = .95), linetype = "dotdash") +
#geom_segment(aes(x = 12.5, y = 0, xend = 12.5, yend = .95), linetype = "dotdash") +
theme_minimal() +
annotate("text", x = 4.5, y = .97, label = "95% Confidence") +
annotate("text", x = 4.5, y = .93, label = "12% Subordination") +
#annotate("text", x = 4.5, y = .72, label = "70% Confidence") +
#annotate("text", x = 4.5, y = .68, label = "8% Subordination") +
ylab("Cumulative Density of Loss Function")+
xlab("Cumulative Loss pct (%)") +
theme(panel.grid.major = element_line(size = .50, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(CumDensityData, aes(value * 100)) +
stat_ecdf() +
geom_segment(aes(x = 0, y = .99, xend = 8.5, yend = .99), linetype = "longdash") +
geom_segment(aes(x = 8.5, y = 0, xend = 8.5, yend = .99), linetype = "longdash") +
#geom_segment(aes(x = 0, y = .95, xend = 12.5, yend = .95), linetype = "dotdash") +
#geom_segment(aes(x = 12.5, y = 0, xend = 12.5, yend = .95), linetype = "dotdash") +
theme_minimal() +
annotate("text", x = 4.5, y = .97, label = "95% Confidence") +
annotate("text", x = 4.5, y = .93, label = "12% Subordination") +
#annotate("text", x = 4.5, y = .72, label = "70% Confidence") +
#annotate("text", x = 4.5, y = .68, label = "8% Subordination") +
ylab("Cumulative Density of Loss Function")+
xlab("Cumulative Loss pct (%)") +
theme(panel.grid.major = element_line(size = .50, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(CumDensityData, aes(value * 100)) +
stat_ecdf() +
geom_segment(aes(x = 0, y = .99, xend = 8.5, yend = .99), linetype = "longdash") +
geom_segment(aes(x = 8.5, y = 0, xend = 8.5, yend = .99), linetype = "longdash") +
#geom_segment(aes(x = 0, y = .95, xend = 12.5, yend = .95), linetype = "dotdash") +
#geom_segment(aes(x = 12.5, y = 0, xend = 12.5, yend = .95), linetype = "dotdash") +
theme_minimal() +
annotate("text", x = 4.0, y = .97, label = "99% Confidence") +
annotate("text", x = 4.0, y = .93, label = "8.5% Subordination") +
#annotate("text", x = 4.5, y = .72, label = "70% Confidence") +
#annotate("text", x = 4.5, y = .68, label = "8% Subordination") +
ylab("Cumulative Density of Loss Function")+
xlab("Cumulative Loss pct (%)") +
theme(panel.grid.major = element_line(size = .50, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(CumDensityData, aes(value * 100)) +
stat_ecdf() +
geom_segment(aes(x = 0, y = .99, xend = 8.5, yend = .99), linetype = "longdash") +
geom_segment(aes(x = 8.5, y = 0, xend = 8.5, yend = .99), linetype = "longdash") +
#geom_segment(aes(x = 0, y = .95, xend = 12.5, yend = .95), linetype = "dotdash") +
#geom_segment(aes(x = 12.5, y = 0, xend = 12.5, yend = .95), linetype = "dotdash") +
theme_minimal() +
annotate("text", x = 3.5, y = .97, label = "99% Confidence") +
annotate("text", x = 3.5, y = .93, label = "8.5% Subordination") +
#annotate("text", x = 4.5, y = .72, label = "70% Confidence") +
#annotate("text", x = 4.5, y = .68, label = "8% Subordination") +
ylab("Cumulative Density of Loss Function")+
xlab("Cumulative Loss pct (%)") +
theme(panel.grid.major = element_line(size = .50, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
ggplot(CumDensityData, aes(value * 100)) +
stat_ecdf() +
geom_segment(aes(x = 0, y = .99, xend = 8.5, yend = .99), linetype = "longdash") +
geom_segment(aes(x = 8.5, y = 0, xend = 8.5, yend = .99), linetype = "longdash") +
#geom_segment(aes(x = 0, y = .95, xend = 12.5, yend = .95), linetype = "dotdash") +
#geom_segment(aes(x = 12.5, y = 0, xend = 12.5, yend = .95), linetype = "dotdash") +
theme_minimal() +
annotate("text", x = 3.0, y = .97, label = "99% Confidence") +
annotate("text", x = 3.0, y = .93, label = "8.5% Subordination") +
#annotate("text", x = 4.5, y = .72, label = "70% Confidence") +
#annotate("text", x = 4.5, y = .68, label = "8% Subordination") +
ylab("Cumulative Density of Loss Function")+
xlab("Cumulative Loss pct (%)") +
theme(panel.grid.major = element_line(size = .50, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
mean(as.numeric(subset(CumLoss[,2:1001]/1000000, CumLoss$CumLoss == 360)))
9.9 * .35
8.5/3.46
35 * .35
8.5/12.2
8.5/17.9
set.seed(300)
simulation <- HPISim(shortrate = 0.025, LongTermGrowth = .025, sigma = .025, T = 30, step = 1/12, N = 1000)
sim <- melt(simulation)
colnames(sim) <- c("Period", "Variable", "Value" )
ggplot(sim, aes(x = Period, y = Value * 100, colour = Variable)) +
geom_line(size = .08, alpha = .4) +
theme_minimal() +
ylab("Home Price Index")+
xlab("Time") +
scale_x_continuous(limits = c(0, 360), breaks = seq(0, 360, 36)) +
theme(panel.grid.major = element_line(size = .50, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
library(BondLab)
library(RCurl)
url <- "https://mbsdisclosure.fanniemae.com/disclosure-docs/monthly/mbs022015.zip"
url <- "https://mbsdisclosure.fanniemae.com/"
userpwd <- "glennmschultz@me.com:Kodiak18j#"
filenames <- getURL(url,
#userpwd = userpwd,
#ftp.use.epsv = FALSE,
#dirlistonly = TRUE,
#postfields = c()
)
url <- "https://mbsdisclosure.fanniemae.com/"
userpwd <- "glennmschultz@me.com:Kodiak18j#"
filenames <- getURL(url
#userpwd = userpwd,
#ftp.use.epsv = FALSE,
#dirlistonly = TRUE,
#postfields = c()
)
url <- "https://mbsdisclosure.fanniemae.com/"
userpwd <- "glennmschultz@me.com:Kodiak18j#"
filenames <- getURL(url
#userpwd = userpwd,
#ftp.use.epsv = FALSE,
#dirlistonly = TRUE,
#postfields = c()
)
url <- "https://mbsdisclosure.fanniemae.com/disclosure-docs/monthly/mbs022015.zip"
filenames <- getURL(url
#userpwd = userpwd,
#ftp.use.epsv = FALSE,
#dirlistonly = TRUE,
#postfields = c()
)
url <- "https://mbsdisclosure.fanniemae.com/disclosure-docs/monthly/mbs022015.zip"
userpwd <- "glennmschultz@me.com:Kodiak18j#"
filenames <- getURL(url
userpwd = userpwd,
ftp.use.epsv = FALSE,
dirlistonly = TRUE,
#postfields = c()
)
url <- "https://mbsdisclosure.fanniemae.com/disclosure-docs/monthly/mbs022015.zip"
userpwd <- "glennmschultz@me.com:Kodiak18j#"
filenames <- getURL(url
userpwd = userpwd,
ftp.use.epsv = FALSE,
dirlistonly = TRUE
#postfields = c()
)
url <- "https://mbsdisclosure.fanniemae.com/disclosure-docs/monthly/mbs022015.zip"
userpwd <- "glennmschultz@me.com:Kodiak18j#"
filenames <- getURL(url
userpwd = userpwd,
ftp.use.epsv = FALSE,
dirlistonly = TRUE
)
url <- "https://mbsdisclosure.fanniemae.com/disclosure-docs/monthly/mbs022015.zip"
userpwd <- "glennmschultz@me.com:Kodiak18j#"
filenames <- getURL(url,
userpwd = userpwd,
ftp.use.epsv = FALSE,
dirlistonly = TRUE
)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
install.packages("devtools")
library("devtools", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
devtools::use_vignette("Bond Lab")
install.packages("rmarkdown")
library("rmarkdown", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
devtools::use_vignette("Bond Lab")
detach("package:BondLab", unload=TRUE)
library("BondLab", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library(BondLab)
library("knitr", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library(BondLab)
MortgageCashFlows
MortgageCashFlow
MBSDetail
MBSDetails
library("BondLab", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
MBSDetails
MortgageCashFlow
Mortgage.Monthly.Payment
MBSDetails
EstimYTM
MortgageTermStructure
library("BondLab", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
YTMtoPrice
library("devtools", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library("roxygen2", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library(BondLab)
library(BondLab)
library(BondLab)
library("termstrc", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
3.46 * 2.5/17.9
3.46 * 3/17.9
library("BondLab", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library("devtools", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library("roxygen2", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
TimeValue
MortgageCashFlow
MortgageCashFlows
PassThroughAnalytics
library(BondLab)
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "CPR", CPR = 6)
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "CPR", CPR = 6)
library(BondLab)
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "CPR", CPR = 6)
library(BondLab)
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "CPR", CPR = 6)
library(BondLab)
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 100,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set  = c("NC"),
PrepaymentAssumption = "PPC",
begin.cpr = 1.5,
end.cpr = 8,
seasoning.period = 30)
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "CPR", CPR = 6)
library("lubridate", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "CPR", CPR = 6)
TermStructure
library(BondLab)
library(BondLab)
bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("NC"),
PrepaymentAssumption = "CPR", CPR = 6)
system.time(bondlabMBS4 <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 105.75,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("DA25", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL"))
bondlabMBS55 <- PassThroughAnalytics(bond.id = "bondlabMBS55",
original.bal = 100000,
price = 107.5,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("DA25", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
PassThroughAnalytics
library(BondLab)
bondlabMBS55 <- PassThroughAnalytics(bond.id = "bondlabMBS55",
original.bal = 100000,
price = 107.5,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("DA25", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
library(BondLab)
bondlabMBS55 <- PassThroughAnalytics(bond.id = "bondlabMBS55",
original.bal = 100000,
price = 107.5,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("DA25", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
PassThroughAnalytics
MortgageCashFlow
Scenario
Scenario
MBSDetail
MBSDetails
TimeValue
CPR.To.SMM
Effective.Convexity
RemainBal
RemainBalance
Remain.Balance
library(BondLab)
library(BondLab)
library(BondLab)
MortgageCashFlow
library(BondLab)
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 100,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set  = c("NC"),
PrepaymentAssumption = "PPC",
begin.cpr = 1.5,
end.cpr = 8,
seasoning.period = 30)
library(BondLab)
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 100,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set  = c("NC"),
PrepaymentAssumption = "PPC",
begin.cpr = 1.5,
end.cpr = 8,
seasoning.period = 30)
str(PPC)
library(BondLab)
PPC <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 100,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set  = c("NC"),
PrepaymentAssumption = "PPC",
begin.cpr = 1.5,
end.cpr = 8,
seasoning.period = 30)
PassThroughAnalytics
library(BondLab)
library(BondLab)
set.seed(300)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 105.75, short.rate = 0.0016, sigma = 0.015, paths = 200, PrepaymentAssumption = "MODEL")
library(BondLab)
set.seed(300)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 105.75, short.rate = 0.0016, sigma = 0.015, paths = 200, PrepaymentAssumption = "MODEL")
library(BondLab)
set.seed(300)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 105.75, short.rate = 0.0016, sigma = 0.015, paths = 200, PrepaymentAssumption = "MODEL")
library("lubridate", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
set.seed(300)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 105.75, short.rate = 0.0016, sigma = 0.015, paths = 200, PrepaymentAssumption = "MODEL")
library("termstrc", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
set.seed(300)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 105.75, short.rate = 0.0016, sigma = 0.015, paths = 200, PrepaymentAssumption = "MODEL")
library("optimx", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
set.seed(300)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 105.75, short.rate = 0.0016, sigma = 0.015, paths = 200, PrepaymentAssumption = "MODEL")
library(BondLab)
set.seed(300)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 105.75, short.rate = 0.0016, sigma = 0.015, paths = 200, PrepaymentAssumption = "MODEL")
library(BondLab)
set.seed(300)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 105.75, short.rate = 0.0016, sigma = 0.015, paths = 200, PrepaymentAssumption = "MODEL")
library(BondLab)
set.seed(300)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 105.75, short.rate = 0.0016, sigma = 0.015, paths = 200, PrepaymentAssumption = "MODEL")
library(BondLab)
set.seed(300)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4", trade.date = "01-10-2013", settlement.date = "01-13-2013", original.bal = 100000,
price = 105.75, short.rate = 0.0016, sigma = 0.015, paths = 200, PrepaymentAssumption = "MODEL")
library(BondLab)
library(BondLab)
DollarRoll
library(BondLab)
PassThroughOAS
MortgageCashFlow
BondBasis
CalibrateCIR
library(BondLab)
install.packages("testthat")
library("testthat", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library(BondLab)
library(BondLab)
PassThroughOAS
PassThroughOAS
library(BondLab)
CalibrateCIR
CalibrateCIR
CalibrateCIR
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
PassThroughOAS
DollarRoll
MortgageCashFlow
library(BondLab)
MortgageCashFlow
library(BondLab)
MortgageCashFlow
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
output: rmarkdown::html_vignette
citations()
citation()
library(BondLab)
library(BondLab)
library("roxygen2", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
rm(MBS4.OAS)
MBS4.OAS <- PassThroughOAS(bond.id = "bondlabMBS4",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
original.bal = 100000,
price = 105.75,
short.rate = 0.0016,
sigma = 0.015,
paths = 200,
PrepaymentAssumption = "MODEL")
rm(MBS4)
rm(MBS4.OAS)
Rates
library(BondLab)
Rates
library(BondLab)
library(BondLab)
MortgageCashFlow
library(BondLab)
library(BondLab)
CIRBondPrice
PassThroughOAS
MortgageCashFlow
library(BondLab)
