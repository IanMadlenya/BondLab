grid.newpage()
pushViewport(viewport(layout = Layout))
}
subplot <- function(x, y) viewport(layout.pos.row = x,
layout.pos.col = y)
mmplot <- function(a, b) {
vplayout()
print(a, vp = subplot(1, 1))
print(b, vp = subplot(2, 1))
}
mmplot(ALgraph, ALtable)
#=========== testing of ggplot
AL.Graph <- gtable(widths = unit(1, "null"), heights = unit(c(2,.5), "null"),
respect = FALSE)
gtable_show_layout(AL.Graph)
AL.Graph <- gtable_add_grob(AL.Graph, ALgraph, 1, 1)
AL.Graph <- gtable_add_grob(AL.Graph, ALtable, 2, 1)
plot(AL.Graph)
#================
Key.Rate.Duration <- cbind(BondLabZ@KeyRateTenor, BondLabZ@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), fill = as.factor(Tenor), y = Duration)) +
geom_bar(stat = "identity")+
scale_fill_manual(values = cbbPalette, guide = "none") +
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
# == 19.4 ====================
MBS.OAS.AL <- data.frame(MBS4.OAS@PathWAL)
MBS.OAS.AL <- cbind(MBS.OAS.AL, seq(1: length(MBS.OAS.AL)))
colnames(MBS.OAS.AL) <- c("value", "count")
ggplot(MBS.OAS.AL, aes(x = value )) +
geom_histogram(colour = "lightgrey", fill = "#0072B2") +
theme_minimal() +
scale_x_continuous(breaks = seq(0, 15, 1)) +
ylab("Frequency")+
xlab("Path Avg. Life") +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
# == 19.5 ====================
Z.OAS.AL <- data.frame(BondLabZ_OAS@PathWAL)
Z.OAS.AL <- cbind(Z.OAS.AL, seq(1: length(Z.OAS.AL)))
colnames(Z.OAS.AL) <- c("value", "count")
ggplot(Z.OAS.AL, aes(x = value )) +
geom_histogram(colour = "lightgrey", fill = "#0072B2") +
theme_minimal() +
scale_x_continuous(breaks = seq(10, 60, 5)) +
ylab("Frequency")+
xlab("Path Avg. Life") +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
# == 19.6 ====================
MBS.OAS.Spd <- data.frame(MBS4.OAS@PathSpread)
MBS.OAS.Spd <- cbind(MBS.OAS.Spd, seq(1: length(MBS.OAS.Spd)))
colnames(MBS.OAS.Spd) <- c("value", "count")
ggplot(MBS.OAS.Spd, aes(x = value * 100)) +
geom_histogram(colour = "lightgrey", fill = "#0072B2") +
theme_minimal() +
scale_x_continuous(breaks = seq(-1, 3, .5)) +
ylab("Frequency")+
xlab("Path Spread") +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
# == 19.7 ====================
Z.OAS.Spd <- data.frame(BondLabZ_OAS@PathSpread)
Z.OAS.Spd <- cbind(Z.OAS.Spd, seq(1: length(Z.OAS.Spd)))
colnames(Z.OAS.Spd) <- c("value", "count")
ggplot(Z.OAS.Spd, aes(x = value * 100 )) +
geom_histogram(colour = "lightgrey", fill = "#0072B2") +
theme_minimal() +
scale_x_continuous(breaks = seq(-4, 4, .5)) +
ylab("Frequency")+
xlab("Path Spread") +
theme(panel.grid.major = element_line(size = .25, color = "grey")) +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20)) +
theme(legend.position = "none")
# ===== Zbond Average Life
sum(BondLabZ@TimePeriod * BondLabZ@Principal)/sum(BondLabZ@Principal)
BondLabCMP <-  REMICCashFlow(bond.id = "BondLabCMP1",
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
collateral.price = 105.75,
tranche.price = 103,
PrepaymentAssumption = "PPC",
begin.cpr = .2 * 1.25,
end.cpr = 6 * 1.25,
seasoning.period = 30)
sum(BondLabZ@KeyRate[1:5])
sum(BondLabZ@KeyRateDuration[1:5])
BondLabZ@KeyRateDuration
sum(BondLabZ@KeyRateDuration[6:8])
sum(BondLabZ@KeyRateDuration[8:11])
20.2/16.5
500 * 7
500 * 40
(500 * 40) / 60
(500 * 40) / 60 /60
(2500 * 40) / 60 /60
(2500 * 20) / 60 /60
(500 * 20) / 60 /60
((500 * 20) / 60 /60) * 10
((500 * 20) / 60 /60) * 5
library(BondLab)
cite(termstrc)
citation(termstrc)
library("termstrc", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
citation(termstrc)
citation
citation(termstrc)
termstrc
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
getMethods(DollarRollAnalytics)
DollarRollAnalytics
getAnywhere(DollarRoll)
getAnywhere(DollarRollAnalytics)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
5000 * 100
5000 * 1000
library(BondLab)
0.02 8 30
0.02 * 30
library("BondLab", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library(BondLab)
library(BondLab)
3000 * 150000
2000 * 80000
1000 * 80000
1000 * 60000
2000 * 1000
2000 * 1000 *12
2000 * 1000 *12 *.60
100 * (2/1600)
100 * (2/1600) * 100000000000
100 * (2/1600) * 100000000000
100 * (1/1600) * 100000000000
library(BondLab)
library(BondLab)
1/16
1/32
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
REMICAnalytics()
REMICAnalytics
getmethod(REMICAnalytics)
getMethod(REMICAnalytics)
library(BondLab)
library(BondLab)
detach("package:BondLab", unload=TRUE)
library("BondLab", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library(BondLab)
getMethod(REMICCashFlow)
REMICCashFlow
REMICCashFlow()
detach("package:BondLab", unload=TRUE)
library("BondLab", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
REMICCashFlow()
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
ondlabMBS55 <- PassThroughAnalytics(bond.id = "bondlabMBS55",
original.bal = 100000,
price = 107.5,
trade.date = "01-10-2013",
settlement.date = "01-13-2013",
scenario.set = c("DA25", "NC", "UA50", "UA100", "UA150", "UA200"),
PrepaymentAssumption = "MODEL")
PassThroughAnalytics
getMethod(PassThroughAnalytics)
warnings()
library("BondLabDownload", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
library(BondLab)
BondAnalytics(bond.id = "bondlab10", principal = 1000, price = 100, trade.date = "01-10-2013, settlement.date = 01-13-2013")
BondAnalytics(bond.id = "bondlab10", principal = 1000, price = 100, trade.date = "01-10-2013, settlement.date = 01-10-2013")
BondAnalytics(bond.id = "bondlab10", principal = 1000, price = 100, trade.date = "01-05-2013, settlement.date = 01-05-2013")
BondAnalytics(bond.id = "bondlab10", principal = 1000, price = 100, trade.date = "01-10-2013, settlement.date = 01-13-2013")
Bond(bond.id = "bondlab10")
Bond(Bond.id = "bondlab10")
BondAnalytics(bond.id = "bondlab10", principal = 1000, price = 100, trade.date = "01-10-2013, settlement.date = 01-15-2013")
BondAnalytics(bond.id = "bondlab10", principal = 1000, price = 100, trade.date = "01-10-2013, settlement.date = 01-16-2013")
BondAnalytics(bond.id = "bondlab10", principal = 1000, price = 100, trade.date = "01-10-2013, settlement.date = 01-16-2013")
bondlab10 <- Bond(Bond.id = "bondlab10")
bondlab10 <- Bond(Bond.id = "bondlab10")
BondAnalytics(bond.id = "bondlab10", principal = 1000, price = 100, trade.date = "01-10-2013, settlement.date = 01-16-2013")
BondAnalytics(bond.id = "bondlab10", principal = 1000, price = 100, trade.date = "01-10-2013, settlement.date = 01-16-2013")
BondAnalytics(bond.id = "bondlab10", principal = 1000, price = 100, trade.date = "01-10-2013", settlement.date = "01-16-2013")
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
library(BondLab)
cite("methods")
citation("methods")
citation("optimx")
citation("ggplot")
citation("ggplot2")
citation("optimx")
library(BondLab)
Key.Rate.Duration <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("NC"),
begin.cpr = .2, end.cpr = 6,
seasoning.period = 30, CPR = 10)
Key.Rate.Duration <- cbind(Key.Rate.Duration@KeyRateTenor, Key.Rate.Duration@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), y = Duration, fill = as.factor(Tenor))) +
geom_bar(stat = "identity")+
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
geom_bar(stat = "identity") +
scale_fill_manual(values = cbbPalette, guide = "none") +
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
library("ggplot2", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
Key.Rate.Duration <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("NC"),
begin.cpr = .2, end.cpr = 6,
seasoning.period = 30, CPR = 10)
Key.Rate.Duration <- cbind(Key.Rate.Duration@KeyRateTenor, Key.Rate.Duration@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), y = Duration, fill = as.factor(Tenor))) +
geom_bar(stat = "identity")+
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
geom_bar(stat = "identity") +
scale_fill_manual(values = cbbPalette, guide = "none") +
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
cbbPalette <- c("#E69F00",
"#56B4E9",
"#009E73",
"#F0E442",
"#0072B2",
"#D55E00",
"#CC79A7",
"#000000",
"#E69F00",
"#56B4E9",
"#009E73",
"#F0E442",
"#0072B2",
"#D55E00",
"#CC79A7",
"#000000"
)
require(ggplot2)
require(termstrc)
Key.Rate.Duration <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("NC"),
begin.cpr = .2, end.cpr = 6,
seasoning.period = 30, CPR = 10)
Key.Rate.Duration <- cbind(Key.Rate.Duration@KeyRateTenor, Key.Rate.Duration@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), y = Duration, fill = as.factor(Tenor))) +
geom_bar(stat = "identity")+
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
geom_bar(stat = "identity") +
scale_fill_manual(values = cbbPalette, guide = "none") +
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
Key.Rate.Duration <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("NC"),
begin.cpr = .2, end.cpr = 6,
seasoning.period = 30, CPR = 10)
Key.Rate.Duration <- cbind(Key.Rate.Duration@KeyRateTenor, Key.Rate.Duration@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), y = Duration, fill = as.factor(Tenor))) +
geom_bar(stat = "identity")+
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
geom_bar(stat = "identity") +
scale_fill_manual(values = cbbPalette, guide = "none") +
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
View(Key.Rate.Duration)
library(BondLab)
Key.Rate.Duration <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("NC"),
begin.cpr = .2, end.cpr = 6,
seasoning.period = 30, CPR = 10)
Key.Rate.Duration <- cbind(Key.Rate.Duration@KeyRateTenor, Key.Rate.Duration@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), y = Duration, fill = as.factor(Tenor))) +
geom_bar(stat = "identity")+
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
geom_bar(stat = "identity") +
scale_fill_manual(values = cbbPalette, guide = "none") +
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
library(BondLab)
Key.Rate.Duration <- PassThroughAnalytics(bond.id = "bondlabMBS5",
original.bal = 100000,
price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("NC"),
begin.cpr = .2, end.cpr = 6,
seasoning.period = 30, CPR = 10)
Key.Rate.Duration <- cbind(Key.Rate.Duration@KeyRateTenor, Key.Rate.Duration@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), y = Duration, fill = as.factor(Tenor))) +
geom_bar(stat = "identity")+
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
geom_bar(stat = "identity") +
scale_fill_manual(values = cbbPalette, guide = "none") +
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
Key.Rate.Duration <- PassThroughAnalytics(bond.id = "bondlabMBS5",
original.bal = 100000,
price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("NC"),
begin.cpr = .2, end.cpr = 6,
seasoning.period = 30, CPR = 10)
Key.Rate.Duration <- cbind(Key.Rate.Duration@KeyRateTenor, Key.Rate.Duration@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), y = Duration, fill = as.factor(Tenor))) +
geom_bar(stat = "identity")+
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
geom_bar(stat = "identity") +
scale_fill_manual(values = cbbPalette, guide = "none") +
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
Key.Rate.Duration <- PassThroughAnalytics(bond.id = "bondlabMBS55",
original.bal = 100000,
price = 100,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("NC"),
begin.cpr = .2, end.cpr = 6,
seasoning.period = 30, CPR = 10)
Key.Rate.Duration <- cbind(Key.Rate.Duration@KeyRateTenor, Key.Rate.Duration@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), y = Duration, fill = as.factor(Tenor))) +
geom_bar(stat = "identity")+
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
geom_bar(stat = "identity") +
scale_fill_manual(values = cbbPalette, guide = "none") +
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
library(BondLab)
Key.Rate.Duration <- PassThroughAnalytics(bond.id = "bondlabMBS4",
original.bal = 100000,
price = 104,
trade.date = "01-02-2013",
settlement.date = "01-05-2013",
PrepaymentAssumption = "MODEL",
scenario.set = c("NC"),
begin.cpr = .2, end.cpr = 6,
seasoning.period = 30, CPR = 10)
Key.Rate.Duration <- cbind(Key.Rate.Duration@KeyRateTenor, Key.Rate.Duration@KeyRateDuration)
colnames(Key.Rate.Duration) <- c("Tenor", "Duration")
Key.Rate.Duration <- as.data.frame(Key.Rate.Duration)
ggplot(Key.Rate.Duration, aes(x = as.factor(Tenor), y = Duration, fill = as.factor(Tenor))) +
geom_bar(stat = "identity")+
theme_minimal()+
theme(panel.grid.major = element_line(size = .25, color = "grey"))+
geom_bar(stat = "identity") +
scale_fill_manual(values = cbbPalette, guide = "none") +
ylab("Key Rate Duration") +
xlab("Key Rate Tenor (years)") +
theme(axis.text = element_text(size = 15)) +
theme(axis.title = element_text(size = 20))
library("Companion2IMBS", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
Chapter.3()
library("Companion2IMBS", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
Chapter.3()
Chapter.3()
Chapter.3()
detach("package:Companion2IMBS", unload=TRUE)
library("Companion2IMBS", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
Chapter.3()
library(BondLab)
Chapter.3()
library(BondLab)
library(BondLab)
